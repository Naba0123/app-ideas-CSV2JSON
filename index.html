<html lang="ja">
  <head>
    <title>CSV2JSON</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./style.css">
    <style>
      .w80p {
        width: 80%;
      }
      /* app css */
      button.button-convert {
        padding: 15px;
        margin: 0 10%;
      }
      .text-center {
        text-align: center;
      }
      textarea[name^=textarea_] {
        width: 90%;
        height: 300px;
        margin: 0 5% 20px;
      }
      #error {
        height: 50px;
        background-color: rgb(255, 213, 213);
        margin: 20px;
        padding: 10px 5%;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>CSV2JSON</h1>
    </header>
    
    <div id="main-content">

      <div id="error"></div>

      <table style="width: 100%">
        <tr>
          <td>
            <h2 class="text-center">CSV</h2>
            <textarea name="textarea_csv"></textarea>
          </td>
          <td>
            <h2 class="text-center">JSON</h2>
            <textarea name="textarea_json"></textarea>
          </td>
        </tr>
        <tr>
          <td>
            <button class="button-convert w80p" onclick="app.convertToJSON()">Convert to JSON →</button>
          </td>
          <td>
            <button class="button-convert w80p" onclick="app.convertToCSV()">← Convert to CSV</button>
          </td>
        </tr>

      </table>


    </div>

    <footer>
      <p><a href="https://github.com/Naba0123/app-ideas-CSV2JSON">GitHub</a></p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
      const app = {
        $textareaCSV: null,
        $textareaJSON: null,
        $error: null,
        init: () => {
          app.$textareaCSV = $('textarea[name=textarea_csv]');
          app.$textareaJSON = $('textarea[name=textarea_json]');
          app.$error = $('#error');
        },
        convertToJSON: () => {
          app.resetError();
          const csv = app.$textareaCSV.val();
          if (!csv) {
            app.error('CSVを左側のテキストエリアに入力してください');
          }
        },
        convertToCSV: () => {
          app.resetError();
          const json = app.$textareaJSON.val();
          if (!json) {
            app.error('JSONを右側のテキストエリアに入力してください')
          }
        },
        resetError: () => {
          app.$error.html('');
        },
        error: (msg) => {
          app.$error.html('<p>' + msg + '</p>');
        }
      }
      $(function() {
        app.init();
      });
    </script>
  </body>
</html>